<Window x:Class="WpfHomeNet.MainWindow"  WindowStartupLocation="Manual"       
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:controls="clr-namespace:WpfHomeNet.Controls"     
    xmlns:local="clr-namespace:WpfHomeNet.UiHelpers"   
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:WpfHomeNet.ViewModels"  
    xmlns:relayComand="clr-namespace:WpfHomeNet"    
        xmlns:converter="clr-namespace:WpfHomeNet.Converters"
    mc:Ignorable="d"        
    WindowStyle="None"
    ResizeMode="CanResize"           
    Width="800"
    Height="600"
    MinWidth="800"                     
    MinHeight="600"  
    AllowsTransparency="True"
    FontFamily="Calibri"
    FontSize="14"                             
    Background="Transparent"
   >
    <Window.Resources>
       
        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Padding" Value="9.4"/>
            <Setter Property="BorderThickness" Value="0.6"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
        </Style>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converter:InverseBooleanToVisibilityConverter x:Key="InverseBooleanVisibleConverter"/>
    </Window.Resources>

    <ContentControl 
        Style="{StaticResource TripleBorderStyle}"                    
        Width="800"                         
        Height="600"
        MinWidth="800"                     
        MinHeight="600"                    
        HorizontalAlignment="Center"                    
        VerticalAlignment="Center"
        MouseDown="WindowDrag_MouseDown">

        <Grid x:Name="MainGrid" Margin="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="40"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="140"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="40"/>
            </Grid.ColumnDefinitions>

            <!-- Шапка -->
            <Border Grid.Row="0" Grid.Column="0">
                <Label HorizontalAlignment="Center" 
                       FontWeight="Bold"
                       Content="HomeNet"
                       FontSize="20"
                       Foreground="Black"/>
            </Border>

            <controls:AdminMenu
                Grid.Row="1"
                Grid.RowSpan="3"
                Visibility="Visible" 
                DataContext="{Binding AdminMenuViewModel}" />
                               

            <!-- Верхнее меню -->
            <StackPanel x:Name="UpperMenu" 
                         Visibility="{Binding RegistrationViewModel.IsComplete,
                   Converter={StaticResource InverseBooleanVisibleConverter}}"
                        IsEnabled="{Binding IsButtonsPanelEnabled}"
                        HorizontalAlignment="Right"
                        Grid.Row="0"               
                        Grid.Column="3"                        
                        Orientation="Horizontal"                        
                        Grid.ColumnSpan="2">
                <Button MinWidth="120"   
                        Command="{Binding ToggleFormVisibilityCommand}"
                        CommandParameter="{Binding RegistrationViewModel}"                      
                        Content="Регистрация" />
                <Button Width="Auto"                       
                        Command="{Binding ToggleFormVisibilityCommand}"
                        CommandParameter="{Binding LoginViewModel}"                    
                        Content="Вход в профиль" 
                        MinWidth="120" />
            </StackPanel>
            
            <!-- Кнопка выхода -->
            <Button Grid.Column="5"              
                    Click="CloseButton_Click"
                    Content="×" Width="Auto"/>

            <!-- Кнопка выхода из аккаунта-->
            <Button x:Name="ButtonExit" Grid.Column="3" Grid.ColumnSpan="2" HorizontalAlignment="Right"
                    Content="Выйти из аккаунта"  
                    
                          Visibility="{Binding RegistrationViewModel.IsComplete,
                          Converter={StaticResource BooleanToVisibilityConverter}}"
     
                  
     />
            
            <controls:RegistrationViewControl 
            Grid.Row="1" Grid.Column="1"
            Grid.ColumnSpan="4"
            Grid.RowSpan="4" 
            DataContext="{Binding RegistrationViewModel}" 
            Visibility="{Binding ControlVisibility}"  />
         
            <controls:LoginViewControl
             DataContext="{Binding LoginViewModel}" 
             Visibility="{Binding ControlVisibility}"
             Grid.Row="1" Grid.Column="1"
             Grid.ColumnSpan="4"
             Grid.RowSpan="4"/>
   
            <controls:UsersTableView x:Name="userTableView" 
                      Visibility="{Binding PanelVisibility}" 
                        Grid.RowSpan="2"
                        Grid.ColumnSpan="6" 
                        Grid.Row="3"/>
                                   
            <!-- Контейнер статус бар -->
            <ContentControl
                    Style="{StaticResource
                    InnerBorderSolidColorStyle}" 
                    Padding="4"  
                    Background="#FFA4B291"
                    Grid.Row="4"
                    Grid.Column="0"
                    Grid.ColumnSpan="6" 
                    Margin="0,137,0,0" 
                    Grid.RowSpan="2">   
                <StatusBar x:Name="StatusUsers"
               Background="#00A3C091">
                    <TextBlock Name="StatusText"
                   Margin="3"
                   Text="{Binding StatusText}"
                   FontWeight="Bold"/>
                </StatusBar>
            </ContentControl>
        </Grid>
    </ContentControl>
</Window>




